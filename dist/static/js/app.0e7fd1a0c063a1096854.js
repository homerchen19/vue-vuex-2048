webpackJsonp([2,0],{0:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}o(133);var n=o(124),i=s(n),r=o(337),a=s(r),u=o(125),l=s(u);o(327),new i.default({store:l.default,el:"#app",render:function(t){return t(a.default)}})},88:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(89),i=s(n),r=o(90),a=s(r),u=o(127),l=s(u),c=function(t){for(var e=t.length,o=t[0].length,s=[],n=0;n<e;n++){s.push([]);for(var i=0;i<o;i++)s[n][i]=t[i][o-n-1]}return s},d=function(){function t(){(0,i.default)(this,t),this.tiles=[],this.cells=[],this.size=4,this.id=0;for(var e=0;e<this.size;e++)this.cells[e]=[this.addTile(0,0,0,this.id++),this.addTile(0,0,0,this.id++),this.addTile(0,0,0,this.id++),this.addTile(0,0,0,this.id++)];for(var o=0;o<2;o++)this.addRandomTile();this.setPositions(!0),this.won=!1,this.fourProbability=.1,this.deltaX=[-1,0,1,0],this.deltaY=[0,-1,0,1],this.score=0}return(0,a.default)(t,[{key:"addTile",value:function(t,e,o,s){var n=new l.default(t,e,o,s);return this.tiles.push(n),n}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.size;e++)for(var o=0;o<this.size;o++)0===this.cells[e][o].value&&t.push({row:e,col:o});var s=~~(Math.random()*t.length),n=t[s],i=Math.random()<this.fourProbability?4:2;this.cells[n.row][n.col]=this.addTile(i,n.row,n.col,this.cells[n.row][n.col].id)}},{key:"moveLeft",value:function(){for(var t=!1,e=0;e<this.size;e++){for(var o=this.cells[e].filter(function(t){return 0!==t.value}),s=[],n=0;n<this.size;n++){var i=o.length?o.shift():this.addTile(0,0,0,this.id++);if(o.length>0&&o[0].value===i.value){var r=i;i=this.addTile(i.value,i.row,i.column,i.id),r.mergedInto=i;var a=o.shift();a.mergedInto=i,i.value+=a.value,this.score+=i.value}s[n]=i,this.won|=2048===i.value,t|=i.value!==this.cells[e][n].value}this.cells[e]=s}return t}},{key:"setPositions",value:function(t){this.cells.forEach(function(e,o){e.forEach(function(e,s){(t||e.oldRow===-1)&&e.new?(e.oldRow=-1,e.new=!1):e.oldRow=e.row,e.oldColumn=e.column,e.row=o,e.column=s,e.markForDeletion=!1})})}},{key:"move",value:function(t){this.clearOldTiles();for(var e=0;e<t;e++)this.cells=c(this.cells);for(var o=this.moveLeft(),s=t;s<this.size;s++)this.cells=c(this.cells);return o&&this.addRandomTile(),this.setPositions(!1),this}},{key:"clearOldTiles",value:function(){this.tiles=this.tiles.filter(function(t){return t.markForDeletion===!1}),this.tiles.forEach(function(t){t.markForDeletion=!0})}},{key:"hasWon",value:function(){return this.won}},{key:"hasLost",value:function(){for(var t=!1,e=0;e<this.size;e++)for(var o=0;o<this.size;o++){t|=0===this.cells[e][o].value;for(var s=0;s<4;++s){var n=e+this.deltaX[s],i=o+this.deltaY[s];n<0||n>=this.size||i<0||i>=this.size||(t|=this.cells[e][o].value===this.cells[n][i].value)}}return!t}},{key:"clean",value:function(){this.setPositions(!1),this.tiles=[]}}]),t}();e.default=d},125:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(124),i=s(n),r=o(347),a=s(r),u=o(336),l=s(u),c=o(88),d=s(c),f=o(126),h=s(f);i.default.use(a.default),i.default.use(l.default);var v=i.default.cookie.get("bestScore")?i.default.cookie.get("bestScore"):0,m={score:0,bestScore:v,board:new d.default};e.default=new a.default.Store({state:m,mutations:h.default})},126:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(123),i=s(n),r=o(88),a=s(r),u={restart:function(t){t.board.clean(),(0,i.default)(1).then(function(){t.board=new a.default})},addScore:function(t,e){t.score=e.score},setBestScore:function(t,e){t.bestScore=e.score}};e.default=u},127:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(89),i=s(n),r=o(90),a=s(r),u=function(){function t(e,o,s,n){(0,i.default)(this,t),this.value=e||0,this.row=o>=0?o:-1,this.column=s>=0?s:-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=n,this.new=!0}return(0,a.default)(t,[{key:"move",value:function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e}},{key:"isNew",value:function(){return this.oldRow===-1&&!this.mergedInto}},{key:"hasMoved",value:function(){return this.fromRow()!=-1&&(this.fromRow()!=this.toRow()||this.fromColumn()!=this.toColumn())||this.mergedInto}},{key:"fromRow",value:function(){return this.mergedInto?this.row:this.oldRow}},{key:"fromColumn",value:function(){return this.mergedInto?this.column:this.oldColumn}},{key:"toRow",value:function(){return this.mergedInto?this.mergedInto.row:this.row}},{key:"toColumn",value:function(){return this.mergedInto?this.mergedInto.column:this.column}}]),t}();e.default=u},128:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(339),i=s(n),r=o(338),a=s(r),u=o(341),l=s(u),c=o(340),d=s(c);e.default={created:function(){window.addEventListener("keydown",this.handleKeyDown.bind(this))},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown.bind(this))},computed:{board:function(){return this.$store.state.board},score:function(){return this.$store.state.score},bestScore:function(){return this.$store.state.bestScore},tiles:function(){return this.board.tiles.filter(function(t){return 0!==t.value})}},methods:{handleKeyDown:function(t){if(!this.board.hasWon()&&t.keyCode>=37&&t.keyCode<=40){t.preventDefault();var e=t.keyCode-37;this.board.move(e),this.board.score>this.score&&this.$store.commit({type:"addScore",score:this.board.score}),this.board.score>this.bestScore&&(this.$store.commit({type:"setBestScore",score:this.board.score}),this.$cookie.set("bestScore",this.board.score,30))}}},components:{Info:i.default,Cell:a.default,TileView:l.default,Overlay:d.default}}},129:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{msg:"hello vue"}}}},130:function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(123),i=s(n);e.default={computed:{score:function(){return this.$store.state.score},bestScore:function(){return this.$store.state.bestScore}},methods:{onRestart:function(){this.$store.commit("restart")}},watch:{score:function(t,e){var o=document.getElementsByClassName("score-container")[0],s=document.createElement("div");s.classList.add("score-addition"),s.textContent="+"+(t-e),o.appendChild(s),(0,i.default)(600).then(function(){var t=document.getElementsByClassName("score-addition")[0];o.removeChild(t)})}}}},131:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{show:function(){return this.$store.state.board.hasWon()||this.$store.state.board.hasLost()},contents:function(){return this.$store.state.board.hasWon()?"Good Job!":this.$store.state.board.hasLost()?"Game Over":""}},methods:{onRestart:function(){this.$store.commit("restart")}}}},132:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{tile:{type:Object,required:!0}},computed:{classes:function(){var t=this.tile,e=["tile"];return e.push("tile"+this.tile.value),t.mergedInto||e.push("position_"+t.row+"_"+t.column),t.mergedInto&&e.push("merged"),t.isNew()&&e.push("new"),t.hasMoved()&&(e.push("row_from_"+t.fromRow()+"_to_"+t.toRow()),e.push("column_from_"+t.fromColumn()+"_to_"+t.toColumn()),e.push("isMoving")),e.join(" ")}}}},327:function(t,e){},328:function(t,e){},329:function(t,e){},330:function(t,e){},331:function(t,e){},332:function(t,e){},337:function(t,e,o){var s,n;o(330),s=o(128);var i=o(344);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},338:function(t,e,o){var s,n;o(332),s=o(129);var i=o(346);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},339:function(t,e,o){var s,n;o(329),s=o(130);var i=o(343);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},340:function(t,e,o){var s,n;o(331),s=o(131);var i=o(345);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,n._scopeId="data-v-683b555d",t.exports=s},341:function(t,e,o){var s,n;o(328),s=o(132);var i=o(342);n=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(n=s=s.default),"function"==typeof n&&(n=n.options),n.render=i.render,n.staticRenderFns=i.staticRenderFns,t.exports=s},342:function(t,e){t.exports={render:function(){var t=this;return t._h("span",{class:t.classes},[t._s(t.tile.value)])},staticRenderFns:[]}},343:function(t,e){t.exports={render:function(){var t=this;return t._h("section",{staticClass:"info"},[t._h("div",{staticClass:"heading"},[t._m(0),t._h("div",{staticClass:"scores-container"},[t._h("div",{staticClass:"score-container"},[t._s(t.score)]),t._h("div",{staticClass:"best-container"},[t._s(t.bestScore)])])]),t._h("div",{staticClass:"sub-heading"},[t._m(1),t._h("a",{staticClass:"restart-button",on:{click:t.onRestart}},["New Game"])])])},staticRenderFns:[function(){var t=this;return t._h("h1",{staticClass:"title"},["2048"])},function(){var t=this;return t._h("p",{staticClass:"game-intro"},["Join the numbers and get to the",t._h("strong",[" 2048 tile!"])])}]}},344:function(t,e){t.exports={render:function(){var t=this;return t._h("div",{attrs:{id:"app"}},[t._h("info"),t._h("div",{staticClass:"board"},[t._l(t.board.cells,function(e){return t._h("div",[t._l(e,function(e){return t._h("cell")})])}),t._l(t.tiles,function(e){return t._h("tile-view",{attrs:{tile:e}})}),t._h("overlay")])])},staticRenderFns:[]}},345:function(t,e){t.exports={render:function(){var t=this;return t._h("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"overlay"},[t._h("p",{staticClass:"message"},[t._s(t.contents)]),t._h("button",{staticClass:"tryAgain-button",on:{click:t.onRestart}},["Try again"])])},staticRenderFns:[]}},346:function(t,e){t.exports={render:function(){var t=this;return t._h("span",{staticClass:"cell"},[t._s("")])},staticRenderFns:[]}}});
//# sourceMappingURL=app.0e7fd1a0c063a1096854.js.map